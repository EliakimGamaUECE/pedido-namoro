<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Heart Quest ‚Äî Quer namorar comigo?</title>
  <style>
    :root {
      --bg: #0f1020;
      --panel: #17182b;
      --accent: #ff4d6d;
      --accent-2: #6ef3a5;
      --text: #e8eaf6;
      --muted: #a9acc7;
      --shadow: 0 20px 40px rgba(0, 0, 0, .35);
      --radius: 18px;
    }

    * {
      box-sizing: border-box
    }

    body {
      margin: 0;
      background: radial-gradient(1200px 600px at 70% -10%, #1a1b36 0%, #0f1020 55%) fixed;
      color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    }

    header {
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(8px);
      background: linear-gradient(180deg, rgba(15, 16, 32, .8), rgba(15, 16, 32, .4));
      border-bottom: 1px solid rgba(255, 255, 255, .06);
    }

    .wrap {
      max-width: 980px;
      margin: 0 auto;
      padding: 16px 20px
    }

    .title {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .title .logo {
      width: 36px;
      height: 36px;
      display: grid;
      place-items: center;
      border-radius: 10px;
      background: conic-gradient(from 220deg, var(--accent), #ffa6b8, var(--accent));
      box-shadow: var(--shadow)
    }

    h1 {
      font-size: 20px;
      margin: 0;
      letter-spacing: .4px
    }

    .progress {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      align-items: center;
    }

    .dot {
      width: 22px;
      height: 6px;
      border-radius: 999px;
      background: #2a2b45;
      transition: .25s transform, .25s background;
    }

    .dot.active {
      background: var(--accent);
      transform: scaleX(1.2)
    }

    .dot.done {
      background: var(--accent-2)
    }

    main {
      padding: 26px 16px 56px
    }

    .card {
      background: linear-gradient(180deg, #1a1b35, #121226);
      border: 1px solid rgba(255, 255, 255, .06);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px;
      max-width: 980px;
      margin: 0 auto;
    }

    .center {
      display: grid;
      place-items: center;
      text-align: center
    }

    h2 {
      margin: 0 0 12px;
      font-size: 26px
    }

    p {
      color: var(--muted);
      margin: 0 0 18px;
      line-height: 1.6
    }

    .btn {
      appearance: none;
      border: none;
      cursor: pointer;
      font-weight: 700;
      letter-spacing: .4px;
      padding: 12px 18px;
      border-radius: 999px;
      background: linear-gradient(180deg, #ff6b89, var(--accent));
      color: white;
      box-shadow: 0 10px 24px rgba(255, 77, 109, .35), inset 0 0 0 1px rgba(255, 255, 255, .2);
      transition: .2s transform, .2s filter;
      font-size: 15px
    }

    .btn:hover {
      transform: translateY(-2px)
    }

    .btn.secondary {
      background: #2a2b45;
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, .08);
      color: #d4d7f0
    }

    .game-area {
      position: relative;
      width: 100%;
      min-height: 360px;
      border-radius: 16px;
      overflow: hidden;
      border: 1px dashed rgba(255, 255, 255, .1);
      background: radial-gradient(800px 500px at 20% 0, rgba(255, 77, 109, .08), transparent 60%), radial-gradient(800px 500px at 80% 100%, rgba(110, 243, 165, .08), transparent 60%)
    }

    /* Hearts (fase 1) */
    .heart {
      position: absolute;
      font-size: 28px;
      cursor: pointer;
      user-select: none;
      transition: transform .15s
    }

    .heart:hover {
      transform: scale(1.2)
    }

    /* Memory (fase 2) */
    .grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(120px, 1fr));
      gap: 12px;
      max-width: 400px;
      margin: 0 auto
    }

    .card-tile {
      height: 300px;
      border-radius: 16px;
      display: grid;
      place-items: center;
      font-size: 34px;
      cursor: pointer;
      background: #202142;
      border: 1px solid rgba(255, 255, 255, .08);
      transition: .25s transform, .25s background;
      overflow: hidden;
      height: 300px;
    }

    .card-tile.revealed {
      background: #2b2d57;
      transform: scale(1.03)
    }

    .card-tile.solved {
      background: #1e3d34;
      border-color: rgba(110, 243, 165, .65)
    }

    .card-tile img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block
    }

    /* Drag sentence (fase 3) */
    .chips {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      width: 100%;
      max-width: 980px;
      margin: 0 auto;
      /* <- largura e centraliza√ß√£o */
    }

    .dropzone {
      min-height: 52px;
      border-radius: 12px;
      border: 1.5px dashed rgba(255, 255, 255, .15);
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      padding: 10px;
      margin-top: 14px;
      width: 100%;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
      /* <- aqui fica mais largo */
    }

    .dropzone.active {
      border-color: var(--accent)
    }

    /* Final */
    .proposal {
      font-size: 28px
    }

    .choices {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 18px
    }

    .btn.no {
      position: relative
    }

    /* Confetti canvas */
    canvas {
      position: fixed;
      inset: 0;
      pointer-events: none
    }

    footer {
      color: #7f83b8;
      text-align: center;
      font-size: 12px;
      margin-top: 22px
    }

    a {
      color: #9ae7ff
    }

    @media (max-width: 520px) {
      h2 {
        font-size: 22px
      }

      .grid {
        grid-template-columns: repeat(3, 1fr)
      }

      .card-tile {
        height: 74px
      }
    }

    @media (max-width: 520px) {
      .grid {
        grid-template-columns: repeat(2, minmax(180px, 1fr));
        /* antes eram 3 colunas menores */
        gap: 14px;
      }

      .card-tile {
        aspect-ratio: 3 / 4;
        /* em p√© */
      }

      .card-tile img {
        object-fit: contain;
        /* mostra a foto inteira */
      }
    }
  </style>
</head>

<body>
  <canvas id="confetti"></canvas>
  <header>
    <div class="wrap">
      <div class="title">
        <div class="logo">üíñ</div>
        <h1>Game do amor para <span id="partnerNameTitle">voc√™</span></h1>
      </div>
      <div class="progress" aria-label="Progresso">
        <div class="dot" data-step="1"></div>
        <div class="dot" data-step="2"></div>
        <div class="dot" data-step="3"></div>
        <div class="dot" data-step="4"></div>
      </div>
    </div>
  </header>

  <main>
    <section class="card center" id="screen">
      <!-- A UI √© montada via JS -->
    </section>
    <footer>
      <div class="wrap">üí° Nossa melhor fase √© a pr√≥xima, quando estivermos juntos...
      </div>
    </footer>
  </main>

  <script>
    // ==== CONFIGURA√á√ïES R√ÅPIDAS ====
    const GAME_CONFIG = {
      partnerName: "Fab√≠",            // Nome que aparece no topo
      introLine: "Pronta para uma aventura rom√¢ntica?",
      heartsToCollect: 8,              // Fase 1: quantidade de cora√ß√µes a coletar
      memoryImages: [
        // Substitua pelas SUAS fotos (URLs absolutas ou caminhos locais). Duplicamos automaticamente para formar os pares.
        "01.jpeg",
        "02.jpeg",
        "03.jpeg",
        "04.png"
      ], // Fase 2: 4 fotos => 4 pares
      sentenceTarget: ["quer", "namorar", "comigo?"], // Fase 3: ordem correta
      finalTitle: "Eu escolho voc√™. Todos os dias.",
      finalQuestion: "Quer namorar comigo?",
      yesText: "Sim! üíò",
      noText: "N√£o üòÖ",
      closingLine: "Obrigado por dizer sim. Eliakim e Fab√≠ agora s√£o NAMORADOS!"
    }

    const screen = document.getElementById('screen');
    const dots = [...document.querySelectorAll('.dot')];
    const setStep = (n) => {
      dots.forEach(d => {
        const step = +d.dataset.step;
        d.classList.toggle('active', step === n);
        d.classList.toggle('done', step < n);
      })
    }
    document.getElementById('partnerNameTitle').textContent = GAME_CONFIG.partnerName;

    // ===== Confetti (bem levinho) =====
    const confetti = (() => {
      const canvas = document.getElementById('confetti');
      const ctx = canvas.getContext('2d');
      let w, h; let pieces = []; let frame;
      const resize = () => { w = canvas.width = innerWidth; h = canvas.height = innerHeight }
      addEventListener('resize', resize); resize();
      function burst(n = 150) {
        for (let i = 0; i < n; i++) {
          pieces.push({
            x: Math.random() * w,
            y: -10, r: 5 + Math.random() * 6,
            vx: -2 + Math.random() * 4,
            vy: 2 + Math.random() * 3,
            a: Math.random() * Math.PI * 2,
            va: -.1 + Math.random() * .2
          })
        }
        cancelAnimationFrame(frame); loop();
      }
      function loop() {
        ctx.clearRect(0, 0, w, h)
        pieces.forEach(p => {
          p.x += p.vx; p.y += p.vy; p.a += p.va; p.vy += 0.03;
          ctx.save(); ctx.translate(p.x, p.y); ctx.rotate(p.a);
          ctx.fillStyle = 'white'; // cor autom√°tica do tema
          ctx.fillRect(-p.r / 2, -p.r / 2, p.r, p.r);
          ctx.restore();
        })
        pieces = pieces.filter(p => p.y < h + 20)
        if (pieces.length) frame = requestAnimationFrame(loop)
      }
      return { burst }
    })();

    // ===== Views =====
    const html = (strings, ...vals) => strings.map((s, i) => s + (vals[i] ?? '')).join('');

    function viewIntro() {
      setStep(1);
      screen.innerHTML = html`
        <h2>Oi, ${GAME_CONFIG.partnerName}! ‚ú®</h2>
        <p>${GAME_CONFIG.introLine}</p>
        <div style="height:14px"></div>
        <button class="btn" id="start">Come√ßar</button>
      `;
      document.getElementById('start').onclick = () => startHearts();
    }

    // ===== FASE 1 ‚Äî Ca√ßa aos Cora√ß√µes =====
    function startHearts() {
      setStep(1);
      let collected = 0;
      screen.innerHTML = html`
        <h2>Fase 1 ‚Ä¢ Colecione ${GAME_CONFIG.heartsToCollect} cora√ß√µes</h2>
        <p>Toque/click nos cora√ß√µes que aparecerem. Amor est√° no ar! üíó</p>
        <div class="game-area" id="area"></div>
        <p id="count">0/${GAME_CONFIG.heartsToCollect}</p>
      `;
      const area = document.getElementById('area');
      const count = document.getElementById('count');

      const spawn = () => {
        const el = document.createElement('div');
        el.className = 'heart'; el.textContent = Math.random() > .5 ? 'üíñ' : 'üíó';
        const rect = area.getBoundingClientRect();
        const x = Math.random() * (rect.width - 40) + 10;
        const y = Math.random() * (rect.height - 40) + 10;
        el.style.left = x + 'px'; el.style.top = y + 'px';
        el.onclick = () => {
          el.remove();
          collected++; count.textContent = `${collected}/${GAME_CONFIG.heartsToCollect}`;
          if (collected >= GAME_CONFIG.heartsToCollect) {
            setTimeout(() => startMemory(), 400);
          }
        }
        area.appendChild(el);
        // Remover depois de um tempo para n√£o acumular
        setTimeout(() => el.remove(), 2500);
      }
      // spawns mais r√°pidos no come√ßo, depois estabiliza
      let t = 0; const timer = setInterval(() => {
        spawn(); t++;
        if (collected >= GAME_CONFIG.heartsToCollect) clearInterval(timer);
      }, 600);
    }

    // ===== FASE 2 ‚Äî Mem√≥ria =====
    function startMemory() {
      setStep(2);
      // cria pares a partir das fotos
      const photos = [...GAME_CONFIG.memoryImages];
      const items = [...photos, ...photos].sort(() => Math.random() - .5);

      // pr√©-carrega as imagens para virar mais suave
      items.forEach(src => { const img = new Image(); img.src = src; });

      const revealed = new Set();
      let first = null; let solved = 0;

      screen.innerHTML = html`
        <h2>Fase 2 ‚Ä¢ Mem√≥ria com nossas fotos</h2>
        <p>Encontre os pares do amor perfeito! üì∏‚ù§Ô∏è</p>
        <div class="grid" id="grid"></div>
      `;
      const grid = document.getElementById('grid');

      items.forEach((src, idx) => {
        const tile = document.createElement('button');
        tile.className = 'card-tile';
        tile.setAttribute('aria-label', 'carta');
        tile.dataset.src = src;
        tile.dataset.idx = idx;
        tile.innerHTML = '<span style="opacity:.35; font-size:26px">‚ùì</span>';
        grid.appendChild(tile);
      })

      grid.addEventListener('click', (e) => {
        const tile = e.target.closest('.card-tile');
        if (!tile || tile.classList.contains('solved')) return;
        const idx = tile.dataset.idx;
        if (revealed.has(idx)) return;
        reveal(tile);
        if (!first) { first = tile; return; }
        // compara
        if (first.dataset.src === tile.dataset.src && first !== tile) {
          first.classList.add('solved'); tile.classList.add('solved');
          solved += 2; first = null;
          if (solved === items.length) { setTimeout(() => startSentence(), 500); }
        } else {
          const a = first, b = tile; first = null;
          setTimeout(() => { hide(a); hide(b); }, 650)
        }
      })

      function reveal(t) {
        revealed.add(t.dataset.idx); t.classList.add('revealed'); t.innerHTML = `<img alt="foto do par" src="${t.dataset.src}">`;
      }
      function hide(t) { if (!t || t.classList.contains('solved')) return; revealed.delete(t.dataset.idx); t.classList.remove('revealed'); t.innerHTML = '<span style="opacity:.35; font-size:26px">‚ùì</span>'; }
    }

    function startSentence() {
      setStep(3);
      const words = shuffle([...GAME_CONFIG.sentenceTarget]);

      screen.innerHTML = html`
        <h2>Fase 3 ‚Ä¢ Monte a frase</h2>
        <p>Arraste as palavras para formar a frase perfeita. üí¨</p>
        <div class="chips" id="chips"></div>
        <div class="dropzone" id="drop" aria-label="alvo"></div>
        <div style="height:10px"></div>
        <button class="btn secondary" id="check">Conferir</button>
      `;

      const chips = document.getElementById('chips');
      const drop = document.getElementById('drop');

      words.forEach(w => chips.appendChild(makeChip(w)));

      // drag & drop b√°sico
      let dragged = null;
      document.addEventListener('dragstart', e => {
        if (e.target.classList.contains('chip')) { dragged = e.target; e.dataTransfer.setData('text/plain', dragged.textContent); }
      });
      document.addEventListener('dragend', () => dragged = null);
      ;['dragover', 'dragenter'].forEach(ev => drop.addEventListener(ev, e => { e.preventDefault(); drop.classList.add('active') }))
        ;['dragleave', 'drop'].forEach(ev => drop.addEventListener(ev, () => drop.classList.remove('active')))
      drop.addEventListener('drop', e => { e.preventDefault(); if (dragged) drop.appendChild(dragged) })

      document.getElementById('check').onclick = () => {
        const built = [...drop.querySelectorAll('.chip')].map(n => n.textContent.trim());
        if (eqArrays(built, GAME_CONFIG.sentenceTarget)) {
          startFinal();
        } else {
          pulse(drop); // feedback
        }
      }

      function makeChip(text) {
        const el = document.createElement('div');
        el.className = 'chip'; el.textContent = text; el.draggable = true; return el;
      }
    }

    // ===== FINAL =====
    function startFinal() {
      setStep(4);
      screen.innerHTML = html`
        <h2>${GAME_CONFIG.finalTitle}</h2>
        <p class="proposal">${GAME_CONFIG.finalQuestion}</p>
        <div class="choices">
          <button class="btn" id="yes">${GAME_CONFIG.yesText}</button>
          <button class="btn secondary no" id="no">${GAME_CONFIG.noText}</button>
        </div>
      `;

      const no = document.getElementById('no');
      const yes = document.getElementById('yes');

      // Bot√£o "N√£o" fuj√£o üòÖ
      no.addEventListener('mouseenter', () => moveAway(no));
      no.addEventListener('click', () => moveAway(no));

      yes.onclick = () => {
        confetti.burst(220);
        screen.innerHTML = html`
          <h2>üíû S2 üíû</h2>
          <p>${GAME_CONFIG.closingLine}</p>
          <div style="height:14px"></div>
          <a class="btn" href="https://wa.me/?text=Sim%20eu%20aceitei!%20%F0%9F%92%96" target="_blank" rel="noopener">Contar para o mundo</a>
        `;
      }
    }

    // ===== Helpers =====
    function shuffle(a) { return a.sort(() => Math.random() - .5) }
    function eqArrays(a, b) { return a.length === b.length && a.every((v, i) => v === b[i]) }
    function pulse(el) { el.animate([{ transform: 'scale(1)' }, { transform: 'scale(1.03)' }, { transform: 'scale(1)' }], { duration: 350 }) }
    function moveAway(btn) {
      const r = btn.getBoundingClientRect();
      const vw = innerWidth, vh = innerHeight;
      const x = Math.max(12, Math.min(vw - 120, r.left + (-80 + Math.random() * 160)));
      const y = Math.max(12, Math.min(vh - 60, r.top + (-60 + Math.random() * 160)));
      btn.style.position = 'fixed'; btn.style.left = x + 'px'; btn.style.top = y + 'px';
    }


    // start
    viewIntro();
  </script>
</body>

</html>